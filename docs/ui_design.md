# SmartImageFinder 用户界面设计

## 概述

SmartImageFinder 的用户界面采用现代化的设计理念，基于 React 框架和 Ant Design 组件库构建。UI 设计以用户体验为中心，专注于个人使用场景，提供直观、高效的图片管理和检索体验。本文档详细说明系统的页面结构、组件设计、状态管理策略和交互流程。

## 技术栈选择

- **前端框架**: React 18（使用 Vite 构建工具）
- **UI 组件库**: Ant Design 5.x
- **状态管理**: React Context API + Hooks
- **路由管理**: React Router v6
- **类型系统**: TypeScript
- **样式方案**: CSS Modules + Less

## 整体布局结构

系统采用经典的应用布局结构，主要包括：

### 全局布局 (layouts/index.tsx)

```
+------------------------------+
|          顶部导航栏          |
+------+---------------------+
|      |                     |
|      |                     |
| 侧边 |       主内容区       |
| 导航栏|     (可滚动区域)     |
|      |                     |
|      |                     |
+------+---------------------+
```

- **顶部导航栏**: 包含应用标题、搜索框、系统状态指示器和设置按钮
- **侧边导航栏**: 提供主要功能区域导航，包括首页、图片管理、上传、搜索和系统管理
- **主内容区**: 根据当前选中的导航项显示对应功能的内容

## 页面结构

系统主要包含以下页面：

### 1. 首页 (pages/index.tsx)

首页提供系统概览和快速访问按钮：

```
+-------------------------------------------+
| 系统状态卡片 | 图片统计卡片 | 最近活动卡片 |
+-------------------------------------------+
| 最近上传图片                              |
| +------+ +------+ +------+ +------+       |
| | 图片 | | 图片 | | 图片 | | 图片 | ...   |
| +------+ +------+ +------+ +------+       |
+-------------------------------------------+
| 热门标签                                  |
| [标签1] [标签2] [标签3] ...               |
+-------------------------------------------+
```

- **系统状态卡片**: 显示模型加载状态、数据库连接状态等关键系统信息
- **图片统计卡片**: 显示图片总数、分类统计等
- **最近活动卡片**: 展示用户最近的操作，如上传、搜索、编辑等
- **最近上传图片**: 网格布局，显示最近添加的图片缩略图
- **热门标签**: 标签云布局，显示使用频率最高的标签，可点击跳转到相应标签的图片列表

### 2. 图片管理页面 (pages/images/index.tsx)

图片管理是系统的核心页面，采用图片网格布局：

```
+-------------------------------------------+
| 筛选条件面板                              |
| 时间: [日期选择器]  标签: [多选下拉框]    |
| 元数据: [条件构建器]                      |
+-------------------------------------------+
| 排序: [下拉框]  视图: [网格/列表切换]     |
+-------------------------------------------+
| 图片网格                                  |
| +------+  +------+  +------+  +------+    |
| |图片1 |  |图片2 |  |图片3 |  |图片4 |    |
| |标题1 |  |标题2 |  |标题3 |  |标题4 |    |
| +------+  +------+  +------+  +------+    |
|                                           |
| +------+  +------+  +------+  +------+    |
| |图片5 |  |图片6 |  |图片7 |  |图片8 |    |
| |标题5 |  |标题6 |  |标题7 |  |标题8 |    |
| +------+  +------+  +------+  +------+    |
+-------------------------------------------+
| [分页控件]                                |
+-------------------------------------------+
```

- **筛选条件面板**: 支持按上传时间、标签和自定义元数据筛选图片
- **图片网格**: 使用虚拟滚动技术，优化大量图片的浏览体验
- **图片卡片**: 每个图片以卡片形式展示，包含预览图、标题、上传时间和操作按钮
- **分页控件**: 支持页码导航和切换每页显示数量

#### 2.1 图片详情抽屉 (components/ImageDetail/index.tsx)

点击图片卡片会从右侧滑出详情抽屉：

```
+-------------------------------------------+
| 图片详情                         [关闭] X |
+-------------------------------------------+
| +-------------+                           |
| |             |  标题: 海滩日落           |
| |             |                           |
| |   原图预览   |  上传时间: 2023-04-30    |
| |             |                           |
| |             |  文件信息: JPEG 2.4MB     |
| +-------------+                           |
|                                           |
| 描述:                                     |
| [详细描述文本区域]                        |
|                                           |
| 标签:                                     |
| [标签1] [标签2] [标签3] [+添加]           |
|                                           |
| 元数据:                                   |
| +----------+--------------------------+   |
| | 字段名   | 值                       |   |
| +----------+--------------------------+   |
| | 拍摄地点 | 三亚                     |   |
| | 相机型号 | Canon EOS R5             |   |
| | 拍摄时间 | 2023-04-25 18:30         |   |
| +----------+--------------------------+   |
| [+添加字段]                               |
|                                           |
| 相似图片:                                 |
| +------+ +------+ +------+ +------+       |
| | 图片 | | 图片 | | 图片 | | 更多 | ...   |
| +------+ +------+ +------+ +------+       |
|                                           |
| 操作按钮:  
勾选框（启用Ai分析缓存）                               |
| [编辑] [删除] [以图搜图] [AI分析]         |
+-------------------------------------------+
```

- **原图预览**: 支持点击放大、缩放和旋转
- **标题和描述**: 可直接编辑
- **标签管理**: 显示当前标签，支持添加和删除操作
- **元数据表格**: 显示所有元数据，支持添加、编辑和删除操作
- **相似图片**: 显示基于当前图片的相似推荐
- **操作按钮**: 提供常用功能快速访问

### 3. 图片上传页面 (pages/upload/index.tsx)

上传页面设计注重简洁和高效：

```
+-------------------------------------------+
| 上传区域                                  |
| +-----------------------------------+     |
| |                                   |     |
| |     拖放文件到此处或点击选择文件       |     |
| |                                   |     |
| +-----------------------------------+     |
|                                           |
| 批量元数据设置:                           |
| 标签: [多选输入框]                        |
| 公共元数据:                 |
| [+添加自定义元数据]                       |
|                                           |
| 选项: [✓] 自动分析图片生成标题和描述      |
|       [✓] 检测重复图片
|                                           |
| 上传列表:                                 |
| +------------------------------------------+
| | 文件名 | 预览 | 大小 | 状态 | 操作     |
| +------------------------------------------+
| | img1.. | 缩略 | 1.2M | 等待 | [编辑] [移除] |
| | img2.. | 缩略 | 3.4M | 等待 | [编辑] [移除] |
| +------------------------------------------+
|                                           |
| 注: 点击[编辑]可设置单个图片的专有元数据   |
|                                           |
| [开始上传] [清空]                         |
+-------------------------------------------+
```

- **拖放上传区域**: 支持文件拖放和选择器上传
- **批量元数据设置**: 可为所有上传图片添加通用标签和元数据
- **上传选项**: 提供自动分析和重复检测等功能开关
- **上传列表**: 显示所有待上传文件，包含预览、大小、状态和操作按钮
- **上传进度**: 上传过程中显示整体进度条和单个文件进度

#### 3.1 上传结果面板

上传完成后显示结果面板：

```
+-------------------------------------------+
| 上传结果                                  |
| +-----------------------------------+     |
| | ✓ 成功: 5张图片                   |     |
| | ✗ 失败: 1张图片                   |     |
| +-----------------------------------+     |
|                                           |
| 成功上传:                                 |
| +------+ +------+ +------+ +------+       |
| | 图片1| | 图片2| | 图片3| | 更多 |...    |
| +------+ +------+ +------+ +------+       |
|                                           |
| 失败列表:                                 |
| - file.raw: 不支持的文件格式              |
|                                           |
| [查看全部已上传图片] [继续上传]           |
+-------------------------------------------+
```

### 4. 搜索页面 (pages/search/index.tsx)

搜索页面支持多种搜索模式：

```
+-------------------------------------------+
| 搜索类型切换:                             |
| [文本搜索] [图片上传搜索]                 |
+-------------------------------------------+
| 搜索框:                                   |
| +-----------------------------------+     |
| | [输入搜索关键词...]        [搜索] |     |
| +-----------------------------------+     |
|                                           |
| 高级选项:                                 |
| 搜索模式: [下拉框: 向量/文本/混合]        |
| 时间范围: [开始日期] 至 [结束日期]        |
| 标签过滤: [多选下拉框]                    |
+-------------------------------------------+
| 搜索结果 (共123项):                       |
|                                           |
| +------+  +------+  +------+  +------+    |
| |图片1 |  |图片2 |  |图片3 |  |图片4 |    |
| |相似度|  |相似度|  |相似度|  |相似度|    |
| |95%  |  |92%  |  |88%  |  |85%  |    |
| |[编辑]|  |[编辑]|  |[编辑]|  |[编辑]|    |
| +------+  +------+  +------+  +------+    |
|                                           |
| +------+  +------+  +------+  +------+    |
| |图片5 |  |图片6 |  |图片7 |  |图片8 |    |
| |相似度|  |相似度|  |相似度|  |相似度|    |
| |82%  |  |80%  |  |78%  |  |75%  |    |
| |[编辑]|  |[编辑]|  |[编辑]|  |[编辑]|    |
| +------+  +------+  +------+  +------+    |
                    |
+-------------------------------------------+
```

- **搜索类型切换**: 在文本搜索和图片上传搜索之间切换
- **高级选项面板**: 提供搜索模式、时间范围和标签过滤等选项
- **搜索结果网格**: 显示搜索结果，包含相似度百分比
- **编辑功能**: 每个搜索结果都可以单独编辑，点击编辑按钮可打开与图片管理相同的详情抽屉
- **无限滚动**: 支持滚动到底部自动加载更多结果

#### 4.1 图片上传搜索模式

```
+-------------------------------------------+
| 搜索类型切换:                             |
| [文本搜索] [图片上传搜索]                 |
+-------------------------------------------+
| 上传区域:                                 |
| +-----------------------------------+     |
| |                                   |     |
| |  拖放图片到此处或点击选择图片文件      |     |
| |                                   |     |
| +-----------------------------------+     |
|                                           |
| 预览: [上传的图片预览]                    |
|                                           |
| 高级选项: 同文本搜索模式                  |
+-------------------------------------------+
| [开始搜索]                                |
+-------------------------------------------+
```

### 5. 系统设置页面 (pages/settings/index.tsx)

系统设置页面提供配置选项和系统管理功能：

```
+-------------------------------------------+
| 系统设置                                  |
+-------------------------------------------+
| 常规设置:                                 |
| 每页图片数量: [数字输入: 20]              |
|                                           |
| 存储设置:                                 |
| 存储根目录: [路径输入框] [浏览]           |
| 缓存目录: [路径输入框] [浏览]             |
|                                           |
| API设置:                                  |
| OpenAI API密钥: [密码输入框]              |
| API基础URL: [文本输入框]                  |
|                                           |
| 模型设置:                                 |
| 向量模型: [下拉选择: jina-clip-v2/...]    |
| 视觉模型: [下拉选择:Qwen/Qwen2.5-VL-32B-Instruct...]    |
|                                           |
|                               |
|         |
|                   |
|                                           |
| [保存设置]                                |
+-------------------------------------------+
```

- **分类设置面板**: 通过标签页或折叠面板组织不同类别的设置
- **配置项表单**: 提供各类配置的编辑界面
