# SmartImageFinder 搜索设计

## 概述

搜索功能是 SmartImageFinder 系统的核心能力，为用户提供多种方式查找和发现图片资源。系统支持传统基于文本匹配的搜索和基于向量相似度的语义搜索，实现了"以文搜图"、"以图搜图"以及混合搜索等功能。本文档详细说明搜索系统的设计原则、实现策略、优化方法和用户交互体验。

## 搜索模式概述

SmartImageFinder 系统提供两大类搜索模式，满足不同场景的检索需求：

### 1. 非向量检索模式 (文本匹配)

基于传统文本匹配的检索方式，适合精确查找和结构化数据筛选：

- **元数据精确匹配**：根据图片标题、描述或其他元数据字段进行精确或模糊匹配
- **标签过滤**：基于图片标签进行筛选
- **元数据组合查询**：支持多条件组合筛选，如"拍摄地点为北京且标签包含建筑的图片"
- **模糊文本搜索**：使用文本相似度算法对标题和描述进行模糊匹配

### 2. 向量检索模式 (语义搜索)

基于向量相似度的语义检索方式，能够理解搜索意图和图片内容：

- **文本-图片匹配**：将用户输入的文本查询转换为向量，与图片视觉特征向量进行相似度计算
- **文本-文本匹配**：将用户输入的文本查询转换为向量，与图片标题/描述的文本向量进行语义相似度匹配
- **图片-图片匹配**：上传参考图片，与系统中存储的图片进行视觉相似度比较
- **混合检索**：结合向量相似度和元数据/标签过滤，进行更精准的检索

## 搜索架构设计

### 技术选型

- **向量数据库**：Milvus（详见 [数据库设计](./database_design.md)）
- **向量生成**：Jina CLIP V2 模型（详见 [向量生成设计](./vector_generation.md)）
- **文本分析**：使用内置分词和相关性计算
- **混合查询**：Milvus 支持的向量相似度 + 标量过滤

- **高级搜索选项**：
  - 搜索模式选择（文本匹配、向量相似度、混合）
  - 时间范围选择器
  - 标签过滤组件
  - 元数据过滤器
